 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <title>
    issu.com pdf downloader &middot; 
    Tips Tricks & Quick Fix
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://pietropassarelli.com/public/css/hyde.css">
  <link rel="stylesheet" href="http://pietropassarelli.com/public/css/syntax.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface">
<!-- Glyhpicons? -->
<link rel="stylesheet" href="/public/css/elusive-webfont.css">
<!-- Bootstrap -->
<link rel="stylesheet" href="http://pietropassarelli.com/public/css/bootstrap.css">
<link rel="stylesheet" href="http://pietropassarelli.com/public/css/image.css">
  <!-- Icons -->
  <!-- <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/touch-icon-144-precomposed.png"> -->
  <link rel="shortcut icon" href="http://pietropassarelli.com/public/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

<!-- lightbox -->
<script src="http://pietropassarelli.com/public/js/jquery-1.10.2.min.js"></script>
<script src="http://pietropassarelli.com/public/js/lightbox-2.6.min.js"></script>
<link href="http://pietropassarelli.com/public/css/lightbox.css" rel="stylesheet" />


</head>


  
      <body  class="layout-reverse">
    

    <header class="masthead">
      <div class="masthead-inner">
     
 

<h1  id="top">TTQF</h1>
<p class="lead">Tips Tricks & Quick Fix by <a href='http://twitter.com/pietropassarell' target='_blank'>@pietropassarell</a>i.</p>
<!-- <p class="colophon">Developer/film-maker.</p> -->
<div class="colophon">
  <ul class="colophon-links">
  	<a class="icon-home" href="/"> Home</a>
  	<a class="icon-user" href="/about"> About</a>
    <a class="icon-pencil" href="/blog"> Blog</a><br>

  	<a class="icon-list-alt" href="/ttqf/"> Tips,Tricks&Quick Fix</a><br>
  	<h3 id="top">My:</h3>
  	<a class="icon-film" href="/portfolio/video"> Video</a>
  	<a class="icon-laptop" href="/portfolio/tech">Tech</a>
  	<a class="icon-camera"  href="/portfolio/photo"> Photo</a>
  <h3  id="top">Contact:</h3>
 
<!-- <div class="row">
  <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">  -->

<!-- <h5>Pietro Passarelli</h5> -->

<!--   -->



<ul class="nav nav-pills nav-stacked" style="list-style-type: none">
<li><a class="icon-envelope" href="mailto:pietro.passarelli@gmail.com?Subject=Hello&body=Hi Pietro, %0D%0A Was reading your website, and I've got a question..." class="author-social" target="_blank"><i class="icon-mail"></i> e-mail</a> <span ></span></li>


<li><a class="icon-phone" href="tel:00447936180742"> Phone</a></li>


<li><a  class="icon-skype" href="skype:jasszz?call"> Skype</a></li>


<li><a class="icon-facebook" href="https://www.facebook.com/pietro.passarelli"  target="_blank"> Facebook</a></li>



<li><a class="icon-linkedin" href="http://uk.linkedin.com/in/pietropassarelli"  target="_blank"> Linkedin</a></li>

<li><a class="icon-twitter" href="https://twitter.com/pietropassarell"  target="_blank"> Twitter</a></li>






<li><a class="icon-github" href="https://github.com/pietrop"  target="_blank"> GitHub</a></li>



<li><a class="icon-vimeo" href="https://vimeo.com/pietropassarelli"  target="_blank"> Vimeo</a></li>

<li><a class="icon-youtube" href="https://www.youtube.com/user/jaszjasm"  target="_blank"> YouTube </a></li>








</ul>

<!--  </div> 

  </div> --> <!-- row -->

 

  </ul>
 
</div>





      </div>
    </header>

    <div class="content container">

      

<div class="post">
  <h1
  
 class="icon-laptop" 


  > issu.com pdf downloader </h1>
  <span class="post-date">29 Jun 2014 		<a class="icon-github" href="https://github.com/pietrop/issuu.com-downloader"  target="_blank"></a>

		

         

         

          

          

          <small>/ </small></span>
  <p class="lead">a ruby script to download pdfs from issu.com, when the download option has been disabled. </p>





<br><a class="icon-github" href="https://github.com/pietrop/issuu.com-downloader" target="_blank"> Code on GitHub</a>

   

  <!--  
 -->

   
<hr>
  <p><strong>Problem</strong>: I wanted to read the <a href="http://issuu.com/swroblewska/docs/j64913_sheff_doc_fest_inner_whole_s">Sheffield DocFest “Decision Makers Guide 2014”</a> but can’t stand having to read of <code>issu.com</code>, just wanted a nice downloadable pdf, but the pdf download option that is generally under the share button was disabled.</p>

<p><strong>Solution</strong>: I decide to see if I could extract the images that make up the flash object of the site and combine them into a pdf.
First thing first identifying the element id. clicking on white part of the page and inspecting the page in chrome, I found the <code>id=readerreader</code></p>

<div class="image-wrapper">
    <img src="http://1.bp.blogspot.com/-Bu2Bw7_tHjs/U683ZFxKIfI/AAAAAAAAFdM/e_3_4rqBQSc/s1600/Screen+Shot+2014-06-28+at+22.25.43.png" alt="" />
</div>

<p>and under the object <code>type="application/x-shockwave-flash"</code> I found the <code>documentId=140601160255-3a4c0f75ec731801ef369f5000f03104</code></p>

<p>Looking on stack overflow I worked out the following URL: <code>http://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_5.jpg</code> , where <code>140601160255-3a4c0f75ec731801ef369f5000f03104</code> is the id of the article, gives you each page as a jpg file that builds up the online magazine on <code>issue.com</code> named with an incremental count.</p>

<p>And what follows is the code I wrote in ruby and run from terminal</p>

<figure class="highlight"><pre><code class="language-powershell" data-lang="powershell"><span class="nv">$ruby</span> <span class="n">issuu_downloader</span><span class="p">.</span><span class="n">rb</span></code></pre></figure>

<p>I used the <code>Mechanize Gem</code> to download the images, and the <code>prawn gem</code> to combine them into a pdf.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;mechanize&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;prawn&#39;</span>

<span class="c1">########1.Looping through the page to download them</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span>
  <span class="nb">print</span> <span class="s2">&quot;downloading</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">agent</span> <span class="o">=</span> <span class="no">Mechanize</span><span class="o">.</span><span class="n">new</span>
<span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;http://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="n">agent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="o">.</span><span class="n">save</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;downloaded</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="nb">print</span> <span class="s2">&quot;images from 1 to 104 downloaded as jpg</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="c1">########2. Combine all the images into a pdf</span>

<span class="no">Prawn</span><span class="o">::</span><span class="no">Document</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="s2">&quot;DocFest_Decision Makers Guide 2014.pdf&quot;</span><span class="p">,</span> <span class="ss">:page_layout</span> <span class="o">=&gt;</span> <span class="ss">:portrait</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">pdf</span><span class="o">|</span>
   <span class="c1"># pdf.text(&quot;Hello Prawn!&quot;)</span>

<span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">image</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="ss">:at</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">750</span><span class="o">]</span><span class="p">,</span> <span class="ss">:width</span> <span class="o">=&gt;</span> <span class="mi">530</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">start_new_page</span>
<span class="k">end</span><span class="c1">#end of loop</span>
<span class="k">end</span><span class="c1">#end of prawn</span></code></pre></figure>

<p>Let’s just break it down in pseudo code for a second, as we can see it articulates into two parts</p>

<ol>
  <li>
    <p>Loop through page numbers substituting them in the URL, and save locally.
(after all without this script this is what I would have done manually)</p>
  </li>
  <li>
    <p>combine all the downloaded images into a pdf
(again I would have probably done this with preview or automator on os x “manually”</p>
  </li>
</ol>

<h2 id="downloading-the-images">1. Downloading the Images</h2>

<p>Let’s look at the first part first, downloading the images.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;mechanize&#39;</span>

<span class="c1">########Looping through the page to download them</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span>
  <span class="nb">print</span> <span class="s2">&quot;downloading</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">agent</span> <span class="o">=</span> <span class="no">Mechanize</span><span class="o">.</span><span class="n">new</span>
<span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;http://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="n">agent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="o">.</span><span class="n">save</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;downloaded</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">end</span></code></pre></figure>

<p>print “images from 1 to 104 downloaded as jpg\n”</p>

<p>I knew the pages where 104, so I fought a loop would have been a good fit.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span>
   <span class="c1">#change the URL with string interpolation #{i} to change the page number</span>
<span class="k">end</span> </code></pre></figure>

<p>I then added the mechanise gem at the top with</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;mechanise&#39;</span></code></pre></figure>

<p>within the loop I created a new mechanise object and assigned it to a variable agent</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">agent</span> <span class="o">=</span> <span class="no">Mechanize</span><span class="o">.</span><span class="n">new</span></code></pre></figure>

<p>and also within the loop assigned the link to a variable link, where i is the number in the loop, and I’ve added a .to_s method to convert it to string to avoid any problem in the parsing of the URL.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;http://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span></code></pre></figure>

<p>with these two key elements in place, I went about using the mechanise method get on the link, and then saving it, giving it the page name, using the string interpolation of the loop number for the page name.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="n">agent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="o">.</span><span class="n">save</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span></code></pre></figure>

<p>I then added a couple of comments to print out what was going on to get some feedback in terminal while the program was running, and here it is this first part of the problem solved.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;mechanize&#39;</span>

<span class="c1">########Looping through the page to download them</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span>
  <span class="nb">print</span> <span class="s2">&quot;downloading</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">agent</span> <span class="o">=</span> <span class="no">Mechanize</span><span class="o">.</span><span class="n">new</span>
<span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;http://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="n">agent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="o">.</span><span class="n">save</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;downloaded</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="nb">print</span> <span class="s2">&quot;images from 1 to 104 downloaded as jpg</span><span class="se">\n</span><span class="s2">&quot;</span></code></pre></figure>

<h2 id="combining-images-into-one-pdf">2. Combining images into one pdf</h2>

<p>Then for the second part of the problem, combining the images into a pdf I decided to use the gem prawn.
require ‘prawn’
and the idea here is that first you generate a pdf, setting, page layout as portrait,</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Prawn</span><span class="o">::</span><span class="no">Document</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="s2">&quot;DocFest_Decision Makers Guide 2014.pdf&quot;</span><span class="p">,</span> <span class="ss">:page_layout</span> <span class="o">=&gt;</span> <span class="ss">:portrait</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">pdf</span><span class="o">|</span></code></pre></figure>

<p>then I looped through the page number range, adding the jpeg files I saved in the first half of the problem to the pdf object I am creating.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">image</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="ss">:at</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">750</span><span class="o">]</span><span class="p">,</span> <span class="ss">:width</span> <span class="o">=&gt;</span> <span class="mi">530</span></code></pre></figure>

<p>after each page is created I used the method <code>start_new_page</code> on the pdf object.
<code>pdf.start_new_page</code>
And here it is the second half of the solution all together.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;prawn&#39;</span>

<span class="c1">########to combine all the images into a pdf</span>

<span class="no">Prawn</span><span class="o">::</span><span class="no">Document</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="s2">&quot;DocFest_Decision Makers Guide 2014.pdf&quot;</span><span class="p">,</span> <span class="ss">:page_layout</span> <span class="o">=&gt;</span> <span class="ss">:portrait</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">pdf</span><span class="o">|</span>

<span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">104</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">image</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="ss">:at</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">750</span><span class="o">]</span><span class="p">,</span> <span class="ss">:width</span> <span class="o">=&gt;</span> <span class="mi">530</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">start_new_page</span>
<span class="k">end</span><span class="c1">#end of loop</span>
<span class="k">end</span><span class="c1">#end of prawn</span></code></pre></figure>

<h3 id="generalising-the-solution">Generalising the solution</h3>

<p>Last but not least I decided to change the code so that if I want to use it for another magazine on issue.com I can get the prompt from the terminal to add magazine name, page count, and document-id and therefore generalised the solution to the initial problem.
The resulting code is as follow (also on <a href="https://github.com/pietrop/issuu.com-downloader">github</a>):</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;mechanize&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;prawn&#39;</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;&gt; &quot;</span>

<span class="nb">puts</span> <span class="s2">&quot;What is the name of the magazine you&#39;d like to download from issuu.com? ps: this will be the name of your pdf file</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">magazine_name</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>


<span class="nb">puts</span> <span class="s2">&quot;How many pages does it have?</span><span class="se">\n</span><span class="s2"> ie 104</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">page_number</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

<span class="nb">puts</span> <span class="s2">&quot;document Id? </span><span class="se">\n</span><span class="s2"> to get the &#39;document-id&#39; inspect page in chrome,</span><span class="se">\n</span><span class="s2"> search for document-id and paste here,</span><span class="se">\n</span><span class="s2"> ie 140601160255-3a4c0f75ec731801ef369f5000f03104</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">document_id</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.page_number</span><span class="o">.</span><span class="n">to_i</span>
  <span class="nb">print</span> <span class="s2">&quot;downloading</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
  <span class="n">agent</span> <span class="o">=</span> <span class="no">Mechanize</span><span class="o">.</span><span class="n">new</span>
  <span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;http://image.issuu.com/</span><span class="si">#{</span><span class="n">document_id</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">/jpg/page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
  <span class="n">agent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="o">.</span><span class="n">save</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
  <span class="nb">print</span> <span class="s2">&quot;downloaded</span><span class="se">\t</span><span class="s2">page n </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="nb">print</span> <span class="s2">&quot;images from 1 to </span><span class="si">#{</span><span class="n">page_number</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2"> downloaded as jpg</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="c1">########to combine all images into a pdf</span>

<span class="no">Prawn</span><span class="o">::</span><span class="no">Document</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">magazine_name</span><span class="si">}</span><span class="s2">.pdf&quot;</span><span class="p">,</span> <span class="ss">:page_layout</span> <span class="o">=&gt;</span> <span class="ss">:portrait</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">pdf</span><span class="o">|</span>

  <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.page_number</span><span class="o">.</span><span class="n">to_i</span>
      <span class="n">pdf</span><span class="o">.</span><span class="n">image</span> <span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="ss">:at</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">750</span><span class="o">]</span><span class="p">,</span> <span class="ss">:width</span> <span class="o">=&gt;</span> <span class="mi">530</span>
      <span class="n">pdf</span><span class="o">.</span><span class="n">start_new_page</span>
  <span class="k">end</span><span class="c1">#end of loop</span>
<span class="k">end</span>

<span class="nb">print</span> <span class="s2">&quot;images from 1 to </span><span class="si">#{</span><span class="n">page_number</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2"> combined into pdf </span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="c1">########to delete all images, once pdf as been created, to clean up a bit</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">.</span><span class="n">.page_number</span><span class="o">.</span><span class="n">to_i</span>
  <span class="no">File</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;page_</span><span class="si">#{</span><span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">)</span>
<span class="k">end</span><span class="c1">#end of prawn</span>

<span class="nb">print</span> <span class="s2">&quot;images from 1 to </span><span class="si">#{</span><span class="n">page_number</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2"> deleted </span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="c1"># print &quot;your pdf #{magazine_name}.pdf is in: \n #{Dir.pwd}&quot;</span></code></pre></figure>

</div>

<hr>
<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
    
      <li>
        <h5>
          <a href="/quickQuote.html">
            quickQuote - Times & Sunday Times
            <small>21 Jul 2015</small>
          </a>
        </h5>
      </li>
    
      <li>
        <h5>
          <a href="/oneStory.html">
            OneStory at BBC #newsHack
            <small>04 Jun 2015</small>
          </a>
        </h5>
      </li>
    
      <li>
        <h5>
          <a href="/jekyll-fenced-block.html">
            use fenced code blocks in jekyll
            <small>31 May 2015</small>
          </a>
        </h5>
      </li>
    
  </ul>
</div>

    </div>


  </body>
</html>
