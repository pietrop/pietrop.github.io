<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <!-- <link href="https://gmpg.org/xfn/11" rel="profile"> -->
  <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Pietro's website">

  <title>
    
     Pietro
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/style.css" defer>
  <link rel="stylesheet" href="/public/css/post-element-condesed.css" defer>
  <link rel="stylesheet" href="/public/css/dark-mode.css" defer>
  <link rel="stylesheet" href="/public/css/badge.css" defer>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" defer />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" defer />
  <!-- Syntax highlight  -->
  <link id="prism-css" href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet" defer>
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144"
    href="/public/apple-touch-icon-precomposed.png" defer>
  <!-- <link rel="shortcut icon" href="/public/favicon.ico"> -->

  <!-- ////////// Favicon ////////// -->
  <!-- For old IEs -->
  <link rel="shortcut icon" href="/public/favicon.ico/favicon.ico" async>
  <!-- For new browsers - multisize ico  -->
  <link rel="icon" type="image/x-icon" sizes="16x16 32x32" href="/public/favicon.ico/favicon.ico"
    async>
  <!-- For iPad with high-resolution Retina display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/public/favicon.ico/favicon-152.png"
    async>
  <!-- For iPad with high-resolution Retina display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/favicon.ico/favicon-144.png"
    async>
  <!-- For iPhone with high-resolution Retina display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/public/favicon.ico/favicon-120.png"
    async>
  <!-- For iPhone with high-resolution Retina display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/public/favicon.ico/favicon-114.png"
    async>
  <!-- For iPhone 6+ -->
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/public/favicon.ico/favicon-180.png"
    async>
  <!-- For first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/public/favicon.ico/favicon-72.png"
    async>
  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="/public/favicon.ico/favicon-57.png" async>
  <!-- For Old Chrome -->
  <link rel="icon" href="/public/favicon.ico/favicon-32.png" sizes="32x32" async>
  <!-- For IE10 Metro -->
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="favicon-144.png" async>
  <meta name="theme-color" content="#ffffff">
  <!-- Chrome for Android -->
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" sizes="192x192" href="/public/favicon.ico/favicon-192.png" async>
  <!-- ////////// Favicons end ////////// -->


  <!--  -->
  <!-- Open graph -->
  <meta property="og:title" content="issu.com pdf downloader">
  <meta property="og:description" content="">
  <meta property="og:type" content="article">
  <meta property="og:image" content="" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="675" />
  <!-- Twitter -->
  <meta name="twitter:title" content="issu.com pdf downloader">
  <meta name="twitter:card" content="">
  <meta name="twitter:site" content="">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="">
  <meta name="twitter:creator" content="">

  <!--  -->

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R6JQ09CW0P">
  </script>

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-R6JQ09CW0P');
  </script>

  

</head>

<body class="default-pages">
  <div class="container">
    <div class="wrapper">
      <header class="header">
        Pietro Passarelli 
        
        <nav class="nav">
    <ul class="menu-list">
        <li>
            <a class="sidebar-nav-item" href="/">
                About</a>
        </li>

        

        <li> <a class="" href="/categories/video">

                
                Videos
                
            </a> </li>
        

        <li> <a class="" href="/categories/tech">

                
                Tech
                
            </a> </li>
        

        <li> <a class="" href="/categories/ttqf">

                
                Tips Tricks & Quick Fix
                
            </a> </li>
        

        <li> <a class="" href="/categories/blog">

                
                Blog
                
            </a> </li>
        


        <li> <a class="sidebar-nav-item" href="https://pietropassarelli.com/photos/" target="_blank"
                rel="noopener noreferrer">
                Photos↗</a>
        </li>
    </ul>
</nav>
      </header>
      <main class="main"> 
        
<div class="post">
	<h1 class="post-title">issu.com pdf downloader </h1>
	<span class="post-date">2014 Jun 29 
		
	</span> 
	
	<br>

	<small><a href="https://github.com/pietrop/issuu.com-downloader" target="_blank" rel="noopener noreferrer"><i
				class="fab fa-github" aria-hidden="true"></i> GitHub</a>,</small>

	<!-- optional gitbook link -->
	

	<!-- project page -->
	
	<!-- social media -->
	

	




	<!-- tech Stack -->
	

	<!-- image -->
	
	
	
	<!-- description -->
	
	<br>
	a ruby script to download pdfs from issu.com, when the download option has been disabled.
	
	<hr>

	<!-- content -->
	<p><strong>Problem</strong>: I wanted to read the <a href="https://issuu.com/swroblewska/docs/j64913_sheff_doc_fest_inner_whole_s">Sheffield DocFest &quot;Decision Makers Guide 2014&quot;</a> but can't stand having to read of <code>issu.com</code>, just wanted a nice downloadable pdf, but the pdf download option that is generally under the share button was disabled.</p>
<p><strong>Solution</strong>: I decide to see if I could extract the images that make up the flash object of the site and combine them into a pdf.
First thing first identifying the element id. clicking on white part of the page and inspecting the page in chrome, I found the <code>id=readerreader</code></p>
<div class="image-wrapper">
    <img src="https://1.bp.blogspot.com/-Bu2Bw7_tHjs/U683ZFxKIfI/AAAAAAAAFdM/e_3_4rqBQSc/s1600/Screen+Shot+2014-06-28+at+22.25.43.png" alt="" />
</div>
<p>and under the object <code>type=&quot;application/x-shockwave-flash&quot;</code> I found the <code>documentId=140601160255-3a4c0f75ec731801ef369f5000f03104</code></p>
<p>Looking on stack overflow I worked out the following URL: <code>https://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_5.jpg</code> , where <code>140601160255-3a4c0f75ec731801ef369f5000f03104</code> is the id of the article, gives you each page as a jpg file that builds up the online magazine on <code>issue.com</code> named with an incremental count.</p>
<p>And what follows is the code I wrote in ruby and run from terminal</p>
<pre class="language-powershell"><code class="language-powershell"><span class="token variable">$ruby</span> issuu_downloader<span class="token punctuation">.</span>rb</code></pre>
<p>I used the <code>Mechanize Gem</code> to download the images, and the <code>prawn gem</code> to combine them into a pdf.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string">'mechanize'</span><br><span class="token keyword">require</span> <span class="token string">'prawn'</span><br><br><span class="token comment">########1.Looping through the page to download them</span><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token number">.104</span><br>  print <span class="token string">"downloading\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br>agent <span class="token operator">=</span> <span class="token constant">Mechanize</span><span class="token punctuation">.</span><span class="token keyword">new</span><br>link <span class="token operator">=</span> <span class="token string">"https://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>agent<span class="token punctuation">.</span>get<span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>save <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>print <span class="token string">"downloaded\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br><span class="token keyword">end</span><br><br>print <span class="token string">"images from 1 to 104 downloaded as jpg\n"</span><br><br><span class="token comment">########2. Combine all the images into a pdf</span><br><br><span class="token constant">Prawn</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Document</span><span class="token punctuation">.</span>generate<span class="token punctuation">(</span><span class="token string">"DocFest_Decision Makers Guide 2014.pdf"</span><span class="token punctuation">,</span> <span class="token symbol">:page_layout</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:portrait</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>pdf<span class="token operator">|</span><br>   <span class="token comment"># pdf.text("Hello Prawn!")</span><br><br><span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.104</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span><br>    pdf<span class="token punctuation">.</span>image <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><span class="token punctuation">,</span> <span class="token symbol">:at</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">750</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token symbol">:width</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">530</span><br>pdf<span class="token punctuation">.</span>start_new_page<br><span class="token keyword">end</span><span class="token comment">#end of loop</span><br><span class="token keyword">end</span><span class="token comment">#end of prawn</span></code></pre>
<p>Let's just break it down in pseudo code for a second, as we can see it articulates into two parts</p>
<ol>
<li>
<p>Loop through page numbers substituting them in the URL, and save locally.
(after all without this script this is what I would have done manually)</p>
</li>
<li>
<p>combine all the downloaded images into a pdf
(again I would have probably done this with preview or automator on os x &quot;manually&quot;</p>
</li>
</ol>
<h2>1. Downloading the Images</h2>
<p>Let's look at the first part first, downloading the images.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string">'mechanize'</span><br><br><span class="token comment">########Looping through the page to download them</span><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token number">.104</span><br>  print <span class="token string">"downloading\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br>agent <span class="token operator">=</span> <span class="token constant">Mechanize</span><span class="token punctuation">.</span><span class="token keyword">new</span><br>link <span class="token operator">=</span> <span class="token string">"https://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>agent<span class="token punctuation">.</span>get<span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>save <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>print <span class="token string">"downloaded\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br><span class="token keyword">end</span></code></pre>
<p>print &quot;images from 1 to 104 downloaded as jpg\n&quot;</p>
<p>I knew the pages where 104, so I fought a loop would have been a good fit.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token number">.104</span><br>   <span class="token comment">#change the URL with string interpolation #{i} to change the page number</span><br><span class="token keyword">end</span></code></pre>
<p>I then added the mechanise gem at the top with</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string">'mechanise'</span></code></pre>
<p>within the loop I created a new mechanise object and assigned it to a variable agent</p>
<pre class="language-ruby"><code class="language-ruby">agent <span class="token operator">=</span> <span class="token constant">Mechanize</span><span class="token punctuation">.</span><span class="token keyword">new</span></code></pre>
<p>and also within the loop assigned the link to a variable link, where i is the number in the loop, and I've added a .to_s method to convert it to string to avoid any problem in the parsing of the URL.</p>
<pre class="language-ruby"><code class="language-ruby">link <span class="token operator">=</span> <span class="token string">"https://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span></code></pre>
<p>with these two key elements in place, I went about using the mechanise method get on the link, and then saving it, giving it the page name, using the string interpolation of the loop number for the page name.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>agent<span class="token punctuation">.</span>get<span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>save <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span></code></pre>
<p>I then added a couple of comments to print out what was going on to get some feedback in terminal while the program was running, and here it is this first part of the problem solved.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string">'mechanize'</span><br><br><span class="token comment">########Looping through the page to download them</span><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token number">.104</span><br>  print <span class="token string">"downloading\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br>agent <span class="token operator">=</span> <span class="token constant">Mechanize</span><span class="token punctuation">.</span><span class="token keyword">new</span><br>link <span class="token operator">=</span> <span class="token string">"https://image.issuu.com/140601160255-3a4c0f75ec731801ef369f5000f03104/jpg/page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>agent<span class="token punctuation">.</span>get<span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>save <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>print <span class="token string">"downloaded\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br><span class="token keyword">end</span><br><br>print <span class="token string">"images from 1 to 104 downloaded as jpg\n"</span></code></pre>
<h2>2. Combining images into one pdf</h2>
<p>Then for the second part of the problem, combining the images into a pdf I decided to use the gem prawn.
require 'prawn'
and the idea here is that first you generate a pdf, setting, page layout as portrait,</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token constant">Prawn</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Document</span><span class="token punctuation">.</span>generate<span class="token punctuation">(</span><span class="token string">"DocFest_Decision Makers Guide 2014.pdf"</span><span class="token punctuation">,</span> <span class="token symbol">:page_layout</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:portrait</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>pdf<span class="token operator">|</span></code></pre>
<p>then I looped through the page number range, adding the jpeg files I saved in the first half of the problem to the pdf object I am creating.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.104</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span><br>    pdf<span class="token punctuation">.</span>image <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><span class="token punctuation">,</span> <span class="token symbol">:at</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">750</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token symbol">:width</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">530</span></code></pre>
<p>after each page is created I used the method <code>start_new_page</code> on the pdf object.
<code>pdf.start_new_page</code>
And here it is the second half of the solution all together.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string">'prawn'</span><br><br><span class="token comment">########to combine all the images into a pdf</span><br><br><span class="token constant">Prawn</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Document</span><span class="token punctuation">.</span>generate<span class="token punctuation">(</span><span class="token string">"DocFest_Decision Makers Guide 2014.pdf"</span><span class="token punctuation">,</span> <span class="token symbol">:page_layout</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:portrait</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>pdf<span class="token operator">|</span><br><br><span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.104</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span><br>    pdf<span class="token punctuation">.</span>image <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><span class="token punctuation">,</span> <span class="token symbol">:at</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">750</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token symbol">:width</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">530</span><br>pdf<span class="token punctuation">.</span>start_new_page<br><span class="token keyword">end</span><span class="token comment">#end of loop</span><br><span class="token keyword">end</span><span class="token comment">#end of prawn</span></code></pre>
<h3>Generalising the solution</h3>
<p>Last but not least I decided to change the code so that if I want to use it for another magazine on issue.com I can get the prompt from the terminal to add magazine name, page count, and document-id and therefore generalised the solution to the initial problem.
The resulting code is as follow (also on <a href="https://github.com/pietrop/issuu.com-downloader">github</a>):</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string">'mechanize'</span><br><span class="token keyword">require</span> <span class="token string">'prawn'</span><br>prompt <span class="token operator">=</span> <span class="token string">"> "</span><br><br>puts <span class="token string">"What is the name of the magazine you'd like to download from issuu.com? ps: this will be the name of your pdf file\n"</span><br>print prompt<br>magazine_name <span class="token operator">=</span> gets<span class="token punctuation">.</span>chomp<br><br><br>puts <span class="token string">"How many pages does it have?\n ie 104\n"</span><br>print prompt<br>page_number <span class="token operator">=</span> gets<span class="token punctuation">.</span>chomp<br><br>puts <span class="token string">"document Id? \n to get the 'document-id' inspect page in chrome,\n search for document-id and paste here,\n ie 140601160255-3a4c0f75ec731801ef369f5000f03104\n"</span><br>print prompt<br>document_id <span class="token operator">=</span> gets<span class="token punctuation">.</span>chomp<br><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token punctuation">.</span>page_number<span class="token punctuation">.</span>to_i<br>  print <span class="token string">"downloading\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br>  agent <span class="token operator">=</span> <span class="token constant">Mechanize</span><span class="token punctuation">.</span><span class="token keyword">new</span><br>  link <span class="token operator">=</span> <span class="token string">"https://image.issuu.com/<span class="token interpolation"><span class="token delimiter tag">#{</span>document_id<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>/jpg/page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>  agent<span class="token punctuation">.</span>get<span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>save <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><br>  print <span class="token string">"downloaded\tpage n <span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token delimiter tag">}</span></span>\n"</span><br><span class="token keyword">end</span><br><br>print <span class="token string">"images from 1 to <span class="token interpolation"><span class="token delimiter tag">#{</span>page_number<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span> downloaded as jpg\n"</span><br><br><span class="token comment">########to combine all images into a pdf</span><br><br><span class="token constant">Prawn</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Document</span><span class="token punctuation">.</span>generate<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span>magazine_name<span class="token delimiter tag">}</span></span>.pdf"</span><span class="token punctuation">,</span> <span class="token symbol">:page_layout</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:portrait</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>pdf<span class="token operator">|</span><br><br>  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token punctuation">.</span>page_number<span class="token punctuation">.</span>to_i<br>      pdf<span class="token punctuation">.</span>image <span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><span class="token punctuation">,</span> <span class="token symbol">:at</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">750</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token symbol">:width</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">530</span><br>      pdf<span class="token punctuation">.</span>start_new_page<br>  <span class="token keyword">end</span><span class="token comment">#end of loop</span><br><span class="token keyword">end</span><br><br>print <span class="token string">"images from 1 to <span class="token interpolation"><span class="token delimiter tag">#{</span>page_number<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span> combined into pdf \n"</span><br><br><span class="token comment">########to delete all images, once pdf as been created, to clean up a bit</span><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1.</span><span class="token punctuation">.</span>page_number<span class="token punctuation">.</span>to_i<br>  <span class="token builtin">File</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">"page_<span class="token interpolation"><span class="token delimiter tag">#{</span>i<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span>.jpg"</span><span class="token punctuation">)</span><br><span class="token keyword">end</span><span class="token comment">#end of prawn</span><br><br>print <span class="token string">"images from 1 to <span class="token interpolation"><span class="token delimiter tag">#{</span>page_number<span class="token punctuation">.</span>to_s<span class="token delimiter tag">}</span></span> deleted \n"</span><br><span class="token comment"># print "your pdf #{magazine_name}.pdf is in: \n #{Dir.pwd}"</span></code></pre>


	
</div>
        <hr>
<p class="edit-on-github-link">
	<small><a href="https://github.com/pietrop/pietrop.github.io/blob/master/./categories/tech/2014-06-30-ruby-script-to-download-pdf-from.md">Edit this page on GitHub <i class="fab fa-github"></i></a></small>
</p>
      </main>
      <footer class="footer">
    <nav>
        <ul class="contacts-list">
            <li>
                <a
                    href="mailto:pietro.passarelli@gmail.com?Subject=Hello&body=Hi Pietro, %0D%0A Was reading your website, and I've got a question..."
                    class="author-social" target="_blank" rel="noopener noreferrer">
                    <i class="far fa-envelope"></i>
                    E-mail</a> <span></span>
            </li>
            <li>
                <a 
                    href="https://twitter.com/pietropassarell" target="_blank" rel="noopener noreferrer"> 
                    <i class="fab fa-twitter"></i> Twitter</a>
            </li>
            <li>
                <a 
                    href="https://github.com/pietrop" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-github"></i> GitHub</a>
            </li>
            <li>
                <a 
                    href="https://uk.linkedin.com/in/pietropassarelli" target="_blank"
                    rel="noopener noreferrer"><i class="fab fa-linkedin-in"></i> Linkedin</a>
            </li>

            <li>
                <a 
                    href="https://www.instagram.com/pietro.ps" target="_blank"
                    rel="noopener noreferrer"><i class="fab fa-instagram"></i> Instagram</a>
            </li>
        </ul>
    </nav>
</footer>
    </div>
  </div>
  <script>
    // Logic to adjust syntax highlighting based on whether dark mode is on 
    // in the system or not
    const prismEl = document.querySelector('#prism-css');
    const DARK = 'dark';
    const LIGHT = 'light';
    const PRISM_LIGHT_URL = "https://unpkg.com/prismjs@1.20.0/themes/prism.css";
    // https://unpkg.com/browse/prismjs@0.0.1/themes/ coy, dark, funky,okaidia, tomorrow, twilight
    const PRISM_DARK_URL = "https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css"

    function init() {
      const DARK = 'dark';
      const LIGHT = 'light';
      const isSystemDarkMode = matchMedia &&
        matchMedia('(prefers-color-scheme: dark)').matches;

      if (isSystemDarkMode) {
        prismEl.href = PRISM_DARK_URL;
      }

      // Event listener to change with system change
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        const changedColourScheme = e.matches ? DARK : LIGHT;
        if (changedColourScheme === DARK) {
          prismEl.href = PRISM_DARK_URL;
        } else {
          prismEl.href = PRISM_LIGHT_URL;
        }
      });
    }

    init();
  </script>
</body>

</html>